{"version":3,"file":"commonHelpers.js","sources":["../src/js/dom-and-common-func.js","../src/js/quote.js","../src/js/main.js"],"sourcesContent":["const domElements = {\r\n    main: document.querySelector(\"main\"),\r\n    loader: document.querySelector(\".loader\"),\r\n    // Error\r\n    errWindow: document.querySelector(\".modal-error\"),\r\n    errOut: document.querySelector(\".error__para\"),\r\n    errBtn: document.querySelector(\".error__btn\"),\r\n    // Quote\r\n    quoteSection: document.querySelector(\".section-quote\"),\r\n    blockQuote: document.querySelector(\".quote__blockquote\"),\r\n    quoteOut: document.querySelector(\".quote__para\"),\r\n    authorOut: document.querySelector(\".quote__author\"),\r\n    refreshBtn: document.querySelector(\".quote__refresh-btn\"),\r\n    refreshIcon: document.querySelector(\".refresh-btn__icon\"),\r\n\r\n    // Time\r\n    timeSection: document.querySelector(\".section-time\"),\r\n    sunIcon: document.querySelector(\".time__sun-icon\"),\r\n    moonIcon: document.querySelector(\".time__moon-icon\"),\r\n    greetingOut: document.querySelector(\".time__para\"),\r\n    clockOut: document.querySelector(\".time__current-time-title\"),\r\n    timezoneAbrOut: document.querySelector(\".time__current-time-para\"),\r\n    locationOut: document.querySelector(\".time__place-para\"),\r\n    moreBtn: document.querySelector(\".time__more-btn\"),\r\n    moreBtnIcon: document.querySelector(\".more-btn__down-icon\"),\r\n    // Info\r\n    infoSection: document.querySelector(\".section-info\"),\r\n    timezoneOut: document.querySelector(\"#timezone\"),\r\n    dayOfYearOut: document.querySelector(\"#day-of-year\"),\r\n    dayOfWeekOut: document.querySelector(\"#day-of-week\"),\r\n    weekNumOut: document.querySelector(\"#week-number\"),\r\n}\r\n\r\n\r\nexport const delay = (ms) => { return new Promise(resolve => setTimeout(resolve, ms)) }\r\nexport const {\r\n    main,\r\n    loader,\r\n    errWindow,\r\n    errOut,\r\n    errBtn,\r\n    quoteSection,\r\n    blockQuote,\r\n    quoteOut,\r\n    authorOut,\r\n    refreshBtn,\r\n    refreshIcon,\r\n    timeSection,\r\n    sunIcon,\r\n    moonIcon,\r\n    greetingOut,\r\n    clockOut,\r\n    timezoneAbrOut,\r\n    locationOut,\r\n    moreBtn,\r\n    moreBtnIcon,\r\n    infoSection,\r\n    timezoneOut,\r\n    dayOfYearOut,\r\n    dayOfWeekOut,\r\n    weekNumOut,\r\n} = domElements\r\n","import { delay } from \"./dom-and-common-func\"\r\nimport {blockQuote, refreshBtn, refreshIcon, quoteOut, authorOut} from \"./dom-and-common-func\"\r\n\r\nrefreshBtn.addEventListener(\"click\", refreshQuote)\r\n\r\nasync function refreshQuote() {\r\n    animateIconOnRefreshing()\r\n    const iconAnimInterval = setInterval(animateIconOnRefreshing, 750)\r\n    blockQuote.style.opacity = \"0\"\r\n    const quote = await quoteRequest()\r\n    if (quote.quote) {\r\n        quoteOut.style.color = \"\"\r\n        quoteOut.textContent = quote.quote\r\n        authorOut.textContent = quote.author\r\n    } else {\r\n        quoteOut.textContent = `Quote request failed with error: ${quote}`\r\n        quoteOut.style.color = \"#ff0000b7\"\r\n        authorOut.textContent = \"\" \r\n    }\r\n    blockQuote.style.opacity = \"\"\r\n    clearInterval(iconAnimInterval)\r\n}\r\n\r\nasync function quoteRequest() {\r\n    return await fetch('https://dummyjson.com/quotes/random')\r\n        .then(res => {\r\n            if (!res.ok) {\r\n                throw new Error(res.status)\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(data => {\r\n            console.log(\"Quote API: \", data)\r\n            return data\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n            return err\r\n        })\r\n\r\n}\r\n\r\n\r\nasync function animateIconOnRefreshing() {\r\n    refreshIcon.style.transform = \"rotate(0.5turn)\"\r\n    await delay(300)\r\n    refreshIcon.style.transform = \"rotate(360deg)\"\r\n    await delay(300)\r\n    refreshIcon.style.transition = \"none\"\r\n    await delay(50)\r\n    refreshIcon.style.transform = \"rotate(0deg)\"\r\n    await delay(50)\r\n    refreshIcon.style.transition = \"\"\r\n}\r\n\r\n\r\nexport {refreshQuote}","import { delay } from \"./dom-and-common-func\"\r\nimport { errWindow, errOut, errBtn, main, loader, timeSection, infoSection, sunIcon, moonIcon, greetingOut, clockOut, timezoneAbrOut, locationOut, moreBtn, moreBtnIcon, quoteSection, timezoneOut, dayOfYearOut, dayOfWeekOut, weekNumOut } from \"./dom-and-common-func\"\r\nimport { refreshQuote as buildQuoteSection } from \"./quote\"\r\n\r\nmain.classList.add(\"disabled\")\r\nmain.style.opacity = \"0\"\r\ncheckFetches()\r\n\r\nerrBtn.addEventListener(\"click\", checkFetches)\r\nmoreBtn.addEventListener(\"click\", openInfo)\r\n\r\n// FUNCTIONS\r\n\r\n// Fetch Data -------------------------------\r\n\r\n// Fetch, check, and start build function\r\nasync function checkFetches() {\r\n  errWindow.classList.add(\"disabled\")\r\n  const dataFromIp = await fetchIpData()\r\n  const timeData = await fetchTimeData(dataFromIp.ip)\r\n  timeData.countryCode = dataFromIp.country\r\n  if (timeData) {\r\n    buildApplication(timeData)\r\n  } else {\r\n    errWindow.classList.remove(\"disabled\")\r\n  }\r\n}\r\n\r\n// Fetch IP data\r\nasync function fetchIpData() {\r\n  return await fetch('https://api.country.is')\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        console.log(\"IP API:\", data)\r\n        return data\r\n    })\r\n      .catch(error => console.log(\"IP API: \", error));\r\n}\r\n\r\n\r\n// Fetch Timezone data\r\nasync function fetchTimeData(ip) {\r\n  return await fetch(`https://worldtimeapi.org/api/ip/${ip}`)\r\n      .then(res => res.json())\r\n    .then(data => {\r\n      console.log(\"World Time API:\", data)\r\n      return data\r\n      })\r\n      .catch(err => {\r\n        console.log(\"World Time API: \", err)\r\n        errOut.textContent = `Fail to get your data (${err}). Please try again!`\r\n      })\r\n}\r\n\r\n\r\n// Build sections with fetched data---------------------------------------------------\r\n\r\n// General build\r\nasync function buildApplication({ datetime, timezone, abbreviation, countryCode, day_of_year, day_of_week, week_number }) {\r\n  buildQuoteSection()\r\n  buildTimeSection(datetime, timezone, abbreviation, countryCode)\r\n  buildInfoSection(timezone, day_of_year, day_of_week, week_number)\r\n\r\n  main.classList.remove(\"disabled\")\r\n  await delay(50)\r\n  timeSection.style.opacity = \"1\"\r\n  main.style.opacity = \"\"\r\n  loader.classList.add(\"disabled\")\r\n}\r\n\r\n// Time Section\r\nfunction buildTimeSection(datetime, timezone, abbreviation, countryCode) {\r\n  const time = datetime.slice(datetime.indexOf(\"T\") + 1, datetime.indexOf(\"T\") + 6)\r\n  const hours = Number(time.slice(0, 2))\r\n\r\n  if (hours >= 5 && hours < 12) {\r\n    greetingOut.textContent = \"good morning\"\r\n    main.classList.add(\"main_day\")\r\n    infoSection.classList.add(\"section-info_day\")\r\n    sunIcon.classList.remove(\"disabled\")\r\n  } else if (hours >= 12 && hours < 18) {\r\n    greetingOut.textContent = \"good afternoon\"\r\n    main.classList.add(\"main_day\")\r\n    infoSection.classList.add(\"section-info_day\")\r\n    sunIcon.classList.remove(\"disabled\")\r\n  } else {\r\n    main.classList.add(\"main_night\")\r\n    infoSection.classList.add(\"section-info_night\")\r\n    greetingOut.textContent = \"good evening\"\r\n    moonIcon.classList.remove(\"disabled\")\r\n  }\r\n\r\n  clockOut.textContent = time\r\n  timezoneAbrOut.textContent = abbreviation\r\n  const city = timezone.split(\"/\")[1]\r\n  locationOut.textContent = `in ${city.split(\"_\").join(\" \")}, ${countryCode}`\r\n\r\n}\r\n\r\n// Info Section\r\nfunction buildInfoSection(timezone, dayOfYear, dayOfWeek, weekNumber) {\r\n  timezoneOut.textContent = timezone\r\n  dayOfYearOut.textContent = dayOfYear\r\n  dayOfWeekOut.textContent = dayOfWeek\r\n  weekNumOut.textContent = weekNumber\r\n}\r\n\r\n// Open/Close Info section ----------------------------------\r\nasync function openInfo() {\r\n  infoSection.classList.add(\"section-info_open\")\r\n  quoteSection.classList.add(\"section-quote_hidden\")\r\n  moreBtnIcon.style.transform = \"rotate(0.5turn)\"\r\n  await delay(700)\r\n  quoteSection.classList.add(\"disabled\")\r\n\r\n  moreBtn.removeEventListener(\"click\", openInfo)\r\n  moreBtn.addEventListener(\"click\", closeInfo)\r\n}\r\n\r\nasync function closeInfo() {\r\n  infoSection.classList.remove(\"section-info_open\")\r\n  moreBtnIcon.style.transform = \"\"\r\n  await delay(680)\r\n  quoteSection.classList.remove(\"disabled\")\r\n  await delay(20)\r\n  quoteSection.classList.remove(\"section-quote_hidden\")\r\n\r\n  moreBtn.removeEventListener(\"click\", closeInfo)\r\n  moreBtn.addEventListener(\"click\", openInfo)\r\n}\r\n"],"names":["domElements","delay","ms","resolve","main","loader","errWindow","errOut","errBtn","quoteSection","blockQuote","quoteOut","authorOut","refreshBtn","refreshIcon","timeSection","sunIcon","moonIcon","greetingOut","clockOut","timezoneAbrOut","locationOut","moreBtn","moreBtnIcon","infoSection","timezoneOut","dayOfYearOut","dayOfWeekOut","weekNumOut","refreshQuote","animateIconOnRefreshing","iconAnimInterval","quote","quoteRequest","res","data","err","checkFetches","openInfo","dataFromIp","fetchIpData","timeData","fetchTimeData","buildApplication","response","error","ip","datetime","timezone","abbreviation","countryCode","day_of_year","day_of_week","week_number","buildQuoteSection","buildTimeSection","buildInfoSection","time","hours","city","dayOfYear","dayOfWeek","weekNumber","closeInfo"],"mappings":"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"}