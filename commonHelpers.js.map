{"version":3,"file":"commonHelpers.js","sources":["../src/js/quote.js","../src/js/main.js"],"sourcesContent":["import axios from \"axios\"\r\naxios.defaults.headers.common[\"X-Api-Key\"] = \"\"\r\n\r\nconst delay = (ms) => { return new Promise(resolve => setTimeout(resolve, ms)) }\r\n\r\nconst blockQuote = document.querySelector(\".quote__blockquote\")\r\nconst quoteOut = document.querySelector(\".quote__para\")\r\nconst authorOut = document.querySelector(\".quote__author\")\r\nconst refreshBtn = document.querySelector(\".quote__refresh-btn\")\r\nconst refreshIcon = document.querySelector(\".refresh-btn__icon\");\r\nrefreshQuote()\r\n\r\n\r\nrefreshBtn.addEventListener(\"click\", refreshQuote)\r\n\r\nasync function refreshQuote() {\r\n    animateIconOnRefreshing()\r\n    const iconAnimInterval = setInterval(animateIconOnRefreshing, 750)\r\n    blockQuote.style.opacity = \"0\"\r\n    const quote = await quoteRequest()\r\n    if (quote.quote) {\r\n        quoteOut.style.color = \"\"\r\n        quoteOut.textContent = quote.quote\r\n        authorOut.textContent = quote.author\r\n    } else {\r\n        quoteOut.textContent = `Quote request failed with error: ${quote}`\r\n        quoteOut.style.color = \"#ff0000b7\"\r\n        authorOut.textContent = \"\" \r\n    }\r\n    blockQuote.style.opacity = \"\"\r\n    clearInterval(iconAnimInterval)\r\n}\r\n\r\nfunction quoteRequest() {\r\n    return fetch('https://dummyjson.com/quotes/random')\r\n        .then(res => {\r\n            if (!res.ok) {\r\n                throw new Error(res.status)\r\n            }\r\n            return res.json()\r\n        })\r\n        .then(data => {\r\n            console.log(\"Quote API: \", data)\r\n            return data\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n            return err\r\n        })\r\n\r\n}\r\n\r\n\r\nasync function animateIconOnRefreshing() {\r\n    refreshIcon.style.transform = \"rotate(0.5turn)\"\r\n    await delay(300)\r\n    refreshIcon.style.transform = \"rotate(360deg)\"\r\n    await delay(300)\r\n    refreshIcon.style.transition = \"none\"\r\n    await delay(50)\r\n    refreshIcon.style.transform = \"rotate(0deg)\"\r\n    await delay(50)\r\n    refreshIcon.style.transition = \"\"\r\n}\r\n\r\n\r\nexport default delay","import delay from \"./quote\"\r\n\r\nconst errWindow = document.querySelector(\".modal-error\")\r\nconst errOut = document.querySelector(\".error__para\")\r\nconst errBtn = document.querySelector(\".error__btn\")\r\nconst main = document.querySelector(\"main\")\r\nconst loader = document.querySelector(\".loader\")\r\nconst timeSection = document.querySelector(\".section-time\")\r\nconst sunIcon = document.querySelector(\".time__sun-icon\")\r\nconst moonIcon = document.querySelector(\".time__moon-icon\")\r\nconst greetingOut = document.querySelector(\".time__para\")\r\nconst clockOut = document.querySelector(\".time__current-time-title\")\r\nconst timeZoneAbr = document.querySelector(\".time__current-time-para\")\r\nconst locationOut = document.querySelector(\".time__place-para\")\r\n\r\n\r\nmain.classList.add(\"disabled\")\r\nmain.style.opacity = \"0\"\r\ncheckFetches()\r\n\r\nerrBtn.addEventListener(\"click\", checkFetches)\r\n\r\n// FUNCTIONS\r\n\r\n// Fetch Data -------------------------------\r\n\r\n// Fetch, check, and start build function\r\nasync function checkFetches() {\r\n  errWindow.classList.add(\"disabled\")\r\n  const dataFromIp = await fetchIpData()\r\n  const timeData = await fetchTimeData(dataFromIp.ip)\r\n  if (timeData) {\r\n    buildApplication(timeData, dataFromIp.country)\r\n  } else {\r\n    errWindow.classList.remove(\"disabled\")\r\n  }\r\n}\r\n\r\n// Fetch IP data\r\nasync function fetchIpData() {\r\n  return await fetch('https://api.country.is')\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        console.log(\"IP API:\", data)\r\n        return data\r\n    })\r\n      .catch(error => console.log(\"IP API: \", error));\r\n}\r\n\r\n\r\n// Fetch Timezone data\r\nasync function fetchTimeData(ip) {\r\n  return await fetch(`http://worldtimeapi.org/api/ip/${ip}`)\r\n      .then(res => res.json())\r\n    .then(data => {\r\n        console.log(\"World Time API:\", data)\r\n        return data\r\n      })\r\n      .catch(err => {\r\n        console.log(\"World Time API: \", err)\r\n        errOut.textContent = `Fail to get your data (${err}). Please try again!`\r\n      })\r\n}\r\n\r\n\r\n// Build sections with fetched data\r\n\r\n// General build\r\nasync function buildApplication(timeData, country) {\r\n  const currentTime = timeData.datetime.slice(timeData.datetime.indexOf(\"T\") + 1, timeData.datetime.indexOf(\"T\") + 6)\r\n  const currentHours = Number(currentTime.slice(0, 2))\r\n\r\n  if (currentHours >= 5 && currentHours < 12) {\r\n    greetingOut.textContent = \"good morning\"\r\n    main.classList.add(\"main_day\")\r\n    sunIcon.classList.remove(\"disabled\")\r\n  } else if (currentHours >= 12 && currentHours < 18) {\r\n    greetingOut.textContent = \"good afternoon\"\r\n    main.classList.add(\"main_day\")\r\n    sunIcon.classList.remove(\"disabled\")\r\n  } else {\r\n    main.classList.add(\"main_night\")\r\n    greetingOut.textContent = \"good evening\"\r\n    moonIcon.classList.remove(\"disabled\")\r\n  }\r\n\r\n  clockOut.textContent = currentTime\r\n  timeZoneAbr.textContent = timeData.abbreviation\r\n  const city = timeData.timezone.split(\"/\")[1]\r\n  locationOut.textContent = `in ${city.split(\"_\").join(\" \")}, ${country}`\r\n\r\n  main.classList.remove(\"disabled\")\r\n  await delay(50)\r\n  timeSection.style.opacity = \"1\"\r\n  main.style.opacity = \"\"\r\n  loader.classList.add(\"disabled\")\r\n}\r\n"],"names":["axios","delay","ms","resolve","blockQuote","quoteOut","authorOut","refreshBtn","refreshIcon","refreshQuote","animateIconOnRefreshing","iconAnimInterval","quote","quoteRequest","res","data","err","errWindow","errOut","errBtn","main","loader","timeSection","sunIcon","moonIcon","greetingOut","clockOut","timeZoneAbr","locationOut","checkFetches","dataFromIp","fetchIpData","timeData","fetchTimeData","buildApplication","response","error","ip","country","currentTime","currentHours","city"],"mappings":"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"}