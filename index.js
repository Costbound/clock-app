(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const N={main:document.querySelector("main"),loader:document.querySelector(".loader"),errWindow:document.querySelector(".modal-error"),errOut:document.querySelector(".error__para"),errBtn:document.querySelector(".error__btn"),quoteSection:document.querySelector(".section-quote"),blockQuote:document.querySelector(".quote__blockquote"),quoteOut:document.querySelector(".quote__para"),authorOut:document.querySelector(".quote__author"),refreshBtn:document.querySelector(".quote__refresh-btn"),refreshIcon:document.querySelector(".refresh-btn__icon"),timeSection:document.querySelector(".section-time"),sunIcon:document.querySelector(".time__sun-icon"),moonIcon:document.querySelector(".time__moon-icon"),greetingOut:document.querySelector(".time__para"),clockOut:document.querySelector(".time__current-time-title"),timezoneAbrOut:document.querySelector(".time__current-time-para"),locationOut:document.querySelector(".time__place-para"),moreOut:document.querySelector(".time__more-para"),moreBtn:document.querySelector(".time__more-btn"),moreBtnIcon:document.querySelector(".more-btn__down-icon"),infoSection:document.querySelector(".section-info"),timezoneOut:document.querySelector("#timezone"),dayOfYearOut:document.querySelector("#day-of-year"),dayOfWeekOut:document.querySelector("#day-of-week"),weekNumOut:document.querySelector("#week-number")},s=e=>new Promise(t=>setTimeout(t,e)),{main:u,loader:W,errWindow:_,errOut:I,errBtn:D,quoteSection:p,blockQuote:w,quoteOut:y,authorOut:S,refreshBtn:z,refreshIcon:m,timeSection:oe,sunIcon:$,moonIcon:F,greetingOut:g,clockOut:L,timezoneAbrOut:Q,locationOut:U,moreOut:k,moreBtn:f,moreBtnIcon:v,infoSection:h,timezoneOut:G,dayOfYearOut:Y,dayOfWeekOut:H,weekNumOut:M}=N;z.addEventListener("click",x);async function x(){O();const e=setInterval(O,750);w.style.opacity="0";const t=await R();t.quote?(y.style.color="",y.textContent=t.quote,S.textContent=t.author):(y.textContent=`Quote request failed with error: ${t}`,y.style.color="#ff0000b7",S.textContent=""),w.style.opacity="",clearInterval(e)}async function R(){return await fetch("https://dummyjson.com/quotes/random").then(e=>{if(!e.ok)throw new Error(e.status);return e.json()}).then(e=>(console.log("Quote API: ",e),e)).catch(e=>(console.log(e),e))}async function O(){m.style.transform="rotate(0.5turn)",await s(300),m.style.transform="rotate(360deg)",await s(300),m.style.transition="none",await s(50),m.style.transform="rotate(0deg)",await s(50),m.style.transition=""}const V="/clock-app/assets/bg-desc-tab-day-0ttc9Nja.jpg",J="/clock-app/assets/bg-desc-tab-night-Vfrw9YZN.jpg",K="/clock-app/assets/bg-image-daytime-dJtLGd7C.jpg",Z="/clock-app/assets/bg-image-nighttime-7nFHseSV.jpg";u.classList.add("disabled");u.style.opacity="0";C();D.addEventListener("click",C);f.addEventListener("click",q);async function C(){_.classList.add("disabled"),await s(300);const e=await X(),t=await B(e);e&&t?(t.countryCode=e.country,ee(t)):_.classList.remove("disabled")}async function X(){return await fetch("https://api.country.is/").then(e=>{if(!e.ok)throw new Error(e.status);return e.json()}).then(e=>(console.log("IP API:",e),sessionStorage.setItem("ip",e.ip),e)).catch(e=>{console.log("IP API: ",e),I.textContent=`Fail to get your IP (${e}). Please try again!`})}async function B(e){if(e)return await fetch(`https://worldtimeapi.org/api/ip/${sessionStorage.getItem("ip")}`).then(t=>{if(!t.ok)throw new Error(t.status);return t.json()}).then(t=>(console.log("World Time API:",t),t)).catch(t=>{console.log("World Time API: ",t),I.textContent=`Fail to get time zone data from your IP (${t}). Please try again!`})}function ee({datetime:e,timezone:t,abbreviation:r,countryCode:c,day_of_year:o,day_of_week:n,week_number:i}){const{time:l,hours:d,seconds:j}=A(e);x(),te(l,d,t,r,c),P(t,o,n,i),setTimeout(T,(60-j)*1e3);const a=new Image;window.innerWidth>=768?d>=5&&d<18?a.src=V:a.src=J:d>=5&&d<18?a.src=K:a.src=Z,a.onload=async()=>{console.log("BG Image: ","loaded"),b()},a.onerror=async()=>{console.log("BG Image: ","error"),b()}}function te(e,t,r,c,o){const n=l=>{l==="day"?(u.classList.add("main_day"),h.classList.add("section-info_day"),$.classList.remove("disabled")):(u.classList.add("main_night"),h.classList.add("section-info_night"),F.classList.remove("disabled"))};t>=5&&t<12?(g.textContent="good morning",n("day")):t>=12&&t<18?(g.textContent="good afternoon",n("day")):(g.textContent="good evening",n("night")),window.innerWidth>767&&(g.textContent+=", it's currently"),L.textContent=e,Q.textContent=c;const i=r.split("/")[1];U.textContent=`in ${i.split("_").join(" ")}, ${o}`}function P(e,t,r,c){G.textContent=e,Y.textContent=t,H.textContent=r,M.textContent=c}async function b(){u.classList.remove("disabled"),await s(50),u.style.opacity="",W.classList.add("disabled")}async function q(){h.classList.add("section-info_open"),p.classList.add("section-quote_hidden"),v.style.transform="rotate(0.5turn)",k.textContent="less",await s(700),p.classList.add("disabled"),f.removeEventListener("click",q),f.addEventListener("click",E)}async function E(){h.classList.remove("section-info_open"),v.style.transform="",await s(680),k.textContent="more",p.classList.remove("disabled"),await s(20),p.classList.remove("section-quote_hidden"),f.removeEventListener("click",E),f.addEventListener("click",q)}async function T(){const e=await B(1),{datetime:t,timezone:r,day_of_year:c,day_of_week:o,week_number:n}=e,{time:i,seconds:l}=A(t);setTimeout(T,(60-l)*1e3),L.textContent=i,P(r,c,o,n)}function A(e){const t=e.slice(e.indexOf("T")+1,e.indexOf("T")+9),r=t.slice(0,-3),c=Number(r.slice(0,2)),o=t.slice(-2);return{time:r,hours:c,seconds:o}}
//# sourceMappingURL=index.js.map
