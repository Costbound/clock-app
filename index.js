(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function c(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=c(o);fetch(o.href,n)}})();const N={main:document.querySelector("main"),loader:document.querySelector(".loader"),errWindow:document.querySelector(".modal-error"),errOut:document.querySelector(".error__para"),errBtn:document.querySelector(".error__btn"),quoteSection:document.querySelector(".section-quote"),blockQuote:document.querySelector(".quote__blockquote"),quoteOut:document.querySelector(".quote__para"),authorOut:document.querySelector(".quote__author"),refreshBtn:document.querySelector(".quote__refresh-btn"),refreshIcon:document.querySelector(".refresh-btn__icon"),timeSection:document.querySelector(".section-time"),sunIcon:document.querySelector(".time__sun-icon"),moonIcon:document.querySelector(".time__moon-icon"),greetingOut:document.querySelector(".time__para"),clockOut:document.querySelector(".time__current-time-title"),timezoneAbrOut:document.querySelector(".time__current-time-para"),locationOut:document.querySelector(".time__place-para"),moreOut:document.querySelector(".time__more-para"),moreBtn:document.querySelector(".time__more-btn"),moreBtnIcon:document.querySelector(".more-btn__down-icon"),infoSection:document.querySelector(".section-info"),timezoneOut:document.querySelector("#timezone"),dayOfYearOut:document.querySelector("#day-of-year"),dayOfWeekOut:document.querySelector("#day-of-week"),weekNumOut:document.querySelector("#week-number")},i=e=>new Promise(t=>setTimeout(t,e)),{main:a,loader:W,errWindow:S,errOut:z,errBtn:D,quoteSection:p,blockQuote:O,quoteOut:f,authorOut:b,refreshBtn:Q,refreshIcon:d,timeSection:$,sunIcon:w,moonIcon:F,greetingOut:g,clockOut:x,timezoneAbrOut:U,locationOut:G,moreOut:C,moreBtn:y,moreBtnIcon:k,infoSection:m,timezoneOut:Y,dayOfYearOut:H,dayOfWeekOut:M,weekNumOut:R}=N;Q.addEventListener("click",B);async function B(){L();const e=setInterval(L,750);O.style.opacity="0";const t=await V();t.quote?(f.style.color="",f.textContent=t.quote,b.textContent=t.author):(f.textContent=`Quote request failed with error: ${t}`,f.style.color="#ff0000b7",b.textContent=""),O.style.opacity="",clearInterval(e)}async function V(){return await fetch("https://dummyjson.com/quotes/random").then(e=>{if(!e.ok)throw new Error(e.status);return e.json()}).then(e=>(console.log("Quote API: ",e),e)).catch(e=>(console.log(e),e))}async function L(){d.style.transform="rotate(0.5turn)",await i(300),d.style.transform="rotate(360deg)",await i(300),d.style.transition="none",await i(50),d.style.transform="rotate(0deg)",await i(50),d.style.transition=""}const J="/clock-app/assets/bg-desc-tab-day-0ttc9Nja.jpg",K="/clock-app/assets/bg-desc-tab-night-Vfrw9YZN.jpg",Z="/clock-app/assets/bg-image-daytime-dJtLGd7C.jpg",X="/clock-app/assets/bg-image-nighttime-7nFHseSV.jpg";a.classList.add("disabled");a.style.opacity="0";P();D.addEventListener("click",P);y.addEventListener("click",_);async function P(){S.classList.add("disabled");const e=await ee(),t=await T();t.countryCode=e.country,t?te(t):S.classList.remove("disabled")}async function ee(){return await fetch("https://api.country.is").then(e=>e.json()).then(e=>(console.log("IP API:",e),sessionStorage.setItem("ip",e.ip),e)).catch(e=>console.log("IP API: ",e))}async function T(){return await fetch(`https://worldtimeapi.org/api/ip/${sessionStorage.getItem("ip")}`).then(e=>e.json()).then(e=>(console.log("World Time API:",e),e)).catch(e=>{console.log("World Time API: ",e),z.textContent=`Fail to get your data (${e}). Please try again!`})}function te({datetime:e,timezone:t,abbreviation:c,countryCode:r,day_of_year:o,day_of_week:n,week_number:s}){const h=e.slice(e.indexOf("T")+1,e.indexOf("T")+9),q=h.slice(0,-3),u=Number(q.slice(0,2)),E=h.slice(-2);B(),oe(q,u,t,c,r),A(t,o,n,s);const l=new Image;window.innerWidth>=768?u>=5&&u<18?l.src=J:l.src=K:u>=5&&u<18?l.src=Z:l.src=X,l.onload=async()=>{console.log("BG Image: ","loaded"),I()},l.onerror=async()=>{console.log("BG Image: ","error"),I()},setTimeout(()=>{v(),setInterval(v,6e4)},(60-E)*1e3)}function oe(e,t,c,r,o){t>=5&&t<12?(g.textContent="good morning",a.classList.add("main_day"),m.classList.add("section-info_day"),w.classList.remove("disabled")):t>=12&&t<18?(g.textContent="good afternoon",a.classList.add("main_day"),m.classList.add("section-info_day"),w.classList.remove("disabled")):(a.classList.add("main_night"),m.classList.add("section-info_night"),g.textContent="good evening",F.classList.remove("disabled")),window.innerWidth>767&&(g.textContent+=", it's currently"),x.textContent=e,U.textContent=r;const n=c.split("/")[1];G.textContent=`in ${n.split("_").join(" ")}, ${o}`}function A(e,t,c,r){Y.textContent=e,H.textContent=t,M.textContent=c,R.textContent=r}async function I(){a.classList.remove("disabled"),await i(50),$.style.opacity="1",a.style.opacity="",W.classList.add("disabled")}async function _(){m.classList.add("section-info_open"),p.classList.add("section-quote_hidden"),k.style.transform="rotate(0.5turn)",C.textContent="less",await i(700),p.classList.add("disabled"),y.removeEventListener("click",_),y.addEventListener("click",j)}async function j(){m.classList.remove("section-info_open"),k.style.transform="",await i(680),C.textContent="more",p.classList.remove("disabled"),await i(20),p.classList.remove("section-quote_hidden"),y.removeEventListener("click",j),y.addEventListener("click",_)}async function v(){const e=await T(),{datetime:t,timezone:c,day_of_year:r,day_of_week:o,week_number:n}=e,s=t.slice(t.indexOf("T")+1,t.indexOf("T")+6);x.textContent=s,A(c,r,o,n)}
//# sourceMappingURL=index.js.map
